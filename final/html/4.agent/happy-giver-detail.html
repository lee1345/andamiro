<!DOCTYPE html>
<html lang="ko">
    <head>
       <meta charset="UTF-8">
       <meta http-equiv="X-UA-Compatible" content="IE=edge">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <title>3조_안다미로</title>       
       <link rel="stylesheet" href="../../css/happy-giver-detail.css">
       <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
       <style>
        @import url('https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Dongle:wght@300;400;700&display=swap');
        </style>
    </head>
    <body>
        <header>
            <div class="container">
                <h1>
                    <img src="./img/logo.png" style="width:180px">
                </h1>
                <nav>
                    <ul>
                        <li>
                            <button type="button" onclick="location.href='./gift_detail.html'">착한선물</button>
                        </li>
                        <li>
                            <button type="button" onclick="location.href='./narmi_detail.html'" class="selected">행복나르미</button>
                        </li>
                        <li>
                            <button type="button" onclick="location.href='./together_detail.html'">같이가치</button>
                        </li>
                    </ul>
                </nav>
            <div>
                <button>로그인</button> /
                <button>회원가입</button>
            </div>
            </div>
        </header>
        <div class="ctn"> 
            <div class="item1">
                <h4 id="N_region_city"></h4>
                <h2 id="N_location"></h2>
                <img id="N_location_img" src="" width="450px"> 
            </div>
            <div class="item2"> 
            <h4>후원 정보</h4>
            <p class="info"><i class="fa-solid fa-circle-info"><p class="arrow_box">후원금액은<br>
                10,000원,20,000원 중<br>
                선택하여 후원이 <br>
                가능합니다.</p></i></p>
            <h2 id="N_funding_achievement"> 후원중</h4>
                <br>
                <p class="p1">달성률 <span id="N_funding_progress">%</span>    /  목표 금액 <span id="N_Target_amount">원</span></p>
                <br>
                <p class="p1">남은기간 <span id="D_day"></span>   /  <span id="End_date"></span>에 종료</p>
                <br>
                <p class="p1">참여인원: <span id="N_head_count"></span></p>
                <br>
                <button class="bigbtn" onclick="goPayment()">후원하기</button>
                <br>
                <br>
                <button class="like" id="incrementBtn"><img src="./img/heart.png" alt="" width="30px"></button>
                <span id="number" style="padding-right: 30px;">0</span>
                <button class="btn" id="modalBtn">공유하기</button>
            </div>
        </div>

            <!-- 공유하기 창-->
            <div id="myModal" class="modal">
                <div class="modal-content">
                    <span class="close" id="closeBtn">&times;</span><br>
                    <h3>공유하기</h3><br>
                    <p>이 후원을 널리 알려주세요~!</p><br>
                    <div class="share">
                            <img src="./img/icon/페이스북.png" class="icons" onclick="shareFacebook()"> 
                            <img src="./img/icon/네이버밴드.png" class="icons" onclick="shareBand()"> 
                            <img src="./img/icon/트위터.PNG" class="icons" onclick="shareTwitter()"> 
                            <img src="./img/icon/카카오톡.PNG" class="icons" onclick="shareKakao()"> 
                    </div>
                </div>
            </div>
            <br><br>


            <!-- 하단 탭메뉴 -->
            <div class="tabmenu">
                <ul>
                    <li id="tab1" class="btnCon"> 
                        <input type="radio" checked name="tabmenu" id="tabmenu1" style="display: none;">
                        <label for="tabmenu1">나르미 소개</label>
                        <div class="tabCon" style="padding-left: 200px;">
                            <br>
                            <img id="agent_image" src="" class="agent"> 
                            <pre id="agent_Introduce"></pre>
                        </div>
                    </li>
                    <li id="tab2" class="btnCon">
                        <input type="radio" name="tabmenu" id="tabmenu2" style="display: none;">
                        <label for="tabmenu2">목표액 산출내역</label>
                        <div class="tabCon">
                            <br>
                            <div class="container">
                                <table class="invoice" id="invoice">
                                    <tr>
                                        <th>순번</th>
                                        <th>구분</th>
                                        <th>품목</th>
                                        <th>수량</th>
                                        <th>단위</th>
                                        <th>단가</th>
                                        <th>금액</th>
                                        <th>비고</th>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </li>    
                    <li id="tab3" class="btnCon">
                        <input type="radio" name="tabmenu" id="tabmenu3" style="display: none;">
                        <label for="tabmenu3">진행상황</label>
                        <div class="tabCon"><br><br><br><br>
                            <div class="container">
                                <div class="stepBox">
                                    
                                    <div class="circle">
                                        <img src="../../img/confirm.png" style="width:70px;" class="confirm">
                                        <div class="step" id="f_start"></div>
                                        <span>모금시작</span>
                                    </div>
                                    <img src="../../img/arrow_right.PNG" class="arrowRight">
                                    <div class="circle">
                                        <img src="../../img/confirm.png" style="width:70px;" class="confirm">
                                        <div class="step" id="f_complete"></div>
                                        <span>모금완료</span>
                                    </div>
                                    <img src="../../img/arrow_right.PNG" class="arrowRight">
                                    <div class="circle">
                                        <img src="../../img/confirm.png" style="width:70px;" class="confirm">
                                        <div class="step" id="purchase"></div>
                                        <span>물품구매</span>
                                    </div>
                                    <img src="../../img/arrow_right.PNG" class="arrowRight">
                                    <div class="circle">
                                        <div class="step" id="activity"></div>
                                        <span>봉사활동</span>
                                    </div>
                                    <img src="../../img/arrow_right.PNG" class="arrowRight">
                                    <div class="circle">
                                        <div class="step" id="settlement"></div>
                                        <span>정산</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>    
                    <li id="tab4" class="btnCon">
                        <input type="radio" name="tabmenu" id="tabmenu4" style="display: none;">
                        <label for="tabmenu4">정산내역</label>
                        <div class="tabCon">
                            <button class="reciptButton" onclick="location.href='./recipt_image.html'">영수증 확인하기</button>

                            <div class="container">
                                <br>
                                <div class="container">
                                    <table class="settlementTable" id="settlementTable">
                                        <tr>
                                            <th>순번</th>
                                            <th>구분</th>
                                            <th>품목</th>
                                            <th>수량</th>
                                            <th>단위</th>
                                            <th>단가</th>
                                            <th>금액</th>
                                            <th>비고</th>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </li>    
                    <li id="tab5" class="btnCon">
                        <input type="radio" name="tabmenu" id="tabmenu5" style="display: none;">
                        <label for="tabmenu5">댓글</label>
                        <div class="tabCon">
                            <div>
                                <div class="comments">
                                </div>
                                <form onsubmit="addComment(event)">
                                  <input type="text" placeholder="댓글을 입력하세요" style="width:300px" maxlength="20" required >
                                  <button type="submit">등록하기</button>
                                </form>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>

        <script src="./script/happy-giver-detail.js"></script>
        <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js"
        integrity="sha384-TiCUE00h649CAMonG018J2ujOgDKW/kVWlChEuu4jK2vxfAAD0eZxzCKakxg55G4" crossorigin="anonymous"></script>
        <script>
            Kakao.init('kakao'); // 사용하려는 앱의 JavaScript 키 입력
        </script>
                <script src="../../script/test.js"></script>

                <script>
                    document.addEventListener('DOMContentLoaded', () => {
                        const selectedNarmiId = parseInt(localStorage.getItem('selectedNarmiId'), 10);
                        const narmi = Narmi.find(item => item.id === selectedNarmiId);
                        
                        console.log('Selected Narmi ID:', selectedNarmiId);
                        console.log('Narmi Data:', narmi);
                        
                        if (narmi) { 
                            showAgentImage(narmi.agent_img);
                            showLocation(narmi.N_location);
                            showRegionAndCity(narmi.N_region, narmi.N_city); 
                            showTargetAmount(narmi.N_Target_amount);
                            showFundingAchievement(narmi.N_funding_achievement);
                            showFundingProgress(narmi.N_funding_progress);
                            showHeadCount(narmi.N_head_count);
                            showDaysLeft(narmi.D_day);
                            showEndDate(narmi.End_date);
                            showAgentIntroduce(narmi.agent_Introduce);
                            showLocationImage(narmi.N_location_img);
        
                        } else {
                            console.error('오류');
                        }
                    });
                
                    function showRegionAndCity(region, city) {
                        const regionCityElement = document.getElementById('N_region_city');
                        regionCityElement.textContent = `${region} ${city}`; // 공백으로 구분
                    }
                
                    function showAgentName(name) {
                        const agentName = document.getElementById('agent_name');
                        agentName.textContent = name;
                    }
                
                    function showAgentImage(imgSrc) {
                        const agentImage = document.getElementById('agent_image');
                        agentImage.src = imgSrc;
                    }
                    function showLocationImage(imgSrc) {
                        const locationImageElement = document.getElementById('N_location_img');
                        locationImageElement.src = imgSrc;
                    }   
                
                    function showLocation(location) {
                        const locationElement = document.getElementById('N_location');
                        locationElement.textContent = location;
                    }
                
                    function showTargetAmount(amount) {
                        const targetAmountElement = document.getElementById('N_Target_amount');
                        targetAmountElement.textContent = `${amount.toLocaleString()}`;
                    }
                
                    function showFundingAchievement(achievement) {
                        const fundingAchievementElement = document.getElementById('N_funding_achievement');
                        fundingAchievementElement.textContent = `${achievement.toLocaleString()}`;
                    }
                
                    function showFundingProgress(progress) {
                        const fundingProgressElement = document.getElementById('N_funding_progress');
                        fundingProgressElement.textContent = `${progress}`;
                    }
                
                    function showHeadCount(count) {
                        const headCountElement = document.getElementById('N_head_count');
                        headCountElement.textContent = `${count}명`;
                    }
                
                    function showDaysLeft(days) {
                        const daysLeftElement = document.getElementById('D_day');
                        daysLeftElement.textContent = `${days}일`;
                    }
                
                    function showEndDate(endDate) {
                        const endDateElement = document.getElementById('End_date');
                        endDateElement.textContent = `${endDate}`;
                    }
                
                    function showAgentIntroduce(introduce) {
                        const introduceElement = document.getElementById('agent_Introduce');
                        introduceElement.textContent = introduce;
                    }
                </script>
   
    </body>
</html>