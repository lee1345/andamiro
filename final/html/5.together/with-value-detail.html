<!DOCTYPE html>
<html lang="ko">
    <head>
       <meta charset="UTF-8">
       <meta http-equiv="X-UA-Compatible" content="IE=edge">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <title>3조_안다미로</title>       
       <link rel="stylesheet" href="../../css/with-value-detail.css">
       <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
       <link rel="import" href="../../html/1.navbar/header.html">
       <style>
        @import url('https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap');
        #campaomg_img{
            width: 280px;
            height: 320px;
        }
        </style>
    </head>
    <body>
        <!-- 헤더 -->
        <header id="navbar"></header>

        <div class="ctn"> 
            <div class="item1">
                <h4 id="W_region"></h4>
                <h2 id="campaign_topic"></h2>
                <img src="" width="300px" id="campaomg_img"> 
            </div>
            <div class="item2"> 
            <h4>참여정보</h4><br>
            <h2><span id="W_Participant_Count"></span></h2>
            <br>
                <p class="p1">달성률 <span id="W_Participation_Rate"></span>   /  목표인원 <sapn id="W_Target_participants"></sapn></p>
                <br>
                <p class="p1">남은기간 <span id="W_D_day"></span>   /  <span id="W_End_date"></span></p>
                <br>
                <button class="bigbtn" onclick="goPayment()">후원하기</button>
                <br>
                <br>
                <button class="like" id="incrementBtn"><img src="../../img/heart.png" alt="" width="30px"></button>

                <!-- <button class="btn" id="incrementBtn">증가</button> -->
                <span id="number" style="padding-right: 30px;">0</span>
                

                <button class="btn" id="modalBtn">공유하기</button>
            </div>
        </div>

            <!-- 공유하기 창-->
            <div id="myModal" class="modal">
                <div class="modal-content">
                    <span class="close" id="closeBtn">&times;</span><br>
                    <h3>공유하기</h3><br>
                    <p>이 후원을 널리 알려주세요~!</p><br>
                    <div class="share">
                            <img src="../../img/icon/페이스북.png" class="icons" onclick="shareFacebook()"> 
                            <img src="../../img/icon/네이버밴드.png" class="icons" onclick="shareBand()"> 
                            <img src="../../img/icon/트위터.PNG" class="icons" onclick="shareTwitter()"> 
                            <img src="../../img/icon/카카오톡.PNG" class="icons" onclick="shareKakao()"> 
                    </div>
                </div>
            </div>
            <br><br>


            <!-- 하단 탭메뉴 -->
            <div class="tabmenu">
                <ul>
                    <li id="tab1" class="btnCon"> 
                        <input type="radio" checked name="tabmenu" id="tabmenu1" style="display: none;">
                        <label for="tabmenu1">활동내용</label>
                        <div class="tabCon">
                            <img style="text-align: center;" src="" id="capaing_detail_img">
                        </div>
                    </li>
                    <li id="tab2" class="btnCon">
                        <input type="radio" name="tabmenu" id="tabmenu2" style="display: none;">
                        <label for="tabmenu2">안내사항</label>
                        <div class="tabCon">
                        <br>
                        <pre style="text-align: left; font-size: 12pt;" id="activity_participation_guide"></pre>

                        </div>
                    </li>    
                    <li id="tab3" class="btnCon">
                        <input type="radio" name="tabmenu" id="tabmenu3" style="display: none;">
                        <label for="tabmenu3">댓글</label>
                        <div class="tabCon">
                            <div>
                                <div class="comments">
                                </div>
                                <form onsubmit="addComment(event)">
                                  <input type="text" placeholder="댓글을 입력하세요" style="width:300px" maxlength="20" required >
                                  <button type="submit">등록하기</button>
                                </form>
                        
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        <!-- footer -->



        <script src="../../script/with-value-detail.js"></script>
        <script src="../../script/data.js"></script>
        <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js"
        integrity="sha384-TiCUE00h649CAMonG018J2ujOgDKW/kVWlChEuu4jK2vxfAAD0eZxzCKakxg55G4" crossorigin="anonymous"></script>
        <script>
            fetch("../1.navbar/header_NoLogin.html")
            .then(response => response.text())
            .then(data => {
                const navbar = document.getElementById('navbar');
                navbar.innerHTML = data;
                const header = navbar.querySelector('header');

                
            });
        </script>
      <script>
        Kakao.init('kakao'); // 사용하려는 앱의 JavaScript 키 입력
      </script>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const selectedCampaignId = parseInt(localStorage.getItem('selectedCampaignId'), 10);
                const selectedCampaign = campaign.find(item => item.id === selectedCampaignId);
                
                console.log('Selected campaign ID:', selectedCampaignId);
                console.log('campaign Data:', selectedCampaign);
                
                if (selectedCampaign) {
                    showRegion(selectedCampaign.W_region);
                    showTopic(selectedCampaign.campaign_topic);
                    showCampaignImage(selectedCampaign.campaomg_img);
                    showDetailImage(selectedCampaign.capaing_detail_img);
                    showTargetParticipants(selectedCampaign.W_Target_participants);
                    showParticipantCount(selectedCampaign.W_Participant_Count);
                    showParticipationRate(selectedCampaign.W_Participation_Rate);
                    showDaysLeft(selectedCampaign.W_D_day);
                    showEndDate(selectedCampaign.W_End_date);
                    showParticipationGuide(selectedCampaign.activity_participation_guide);
                } else {
                    console.error('오류');
                }
            });
                            
                    function showRegion(region) {
                        const regions = document.getElementById('W_region');
                        regions.textContent = region; 
                    }

                    function showTopic(topic) {
                        const campaignTopic = document.getElementById('campaign_topic');
                        campaignTopic.textContent = topic; 
                    }
                    function showCampaignImage(imgSrc) {
                        const campaignImage = document.getElementById('campaomg_img'); // ID가 'campaomg_img'인 요소
                        campaignImage.src = imgSrc; // 이미지 소스 설정
                    }
                    function showDetailImage(imgSrc) {
                        const detailImageElement = document.getElementById('capaing_detail_img');
                        detailImageElement.src = imgSrc;
                    }
        
                    function showTargetParticipants(participants) {
                        const targetAmountElement = document.getElementById('W_Target_participants');
                        targetAmountElement.textContent = `${participants.toLocaleString()}명`;
                    }
        
                    function showParticipantCount(count) {
                        const participantCountElement = document.getElementById('W_Participant_Count');
                        participantCountElement.textContent = `${count.toLocaleString()}명 신청`;
                    }
        
                    function showParticipationRate(rate) {
                        const participationRateElement = document.getElementById('W_Participation_Rate');
                        participationRateElement.textContent = `${rate}%`;
                    }
        
                    function showDaysLeft(days) {
                        const daysLeftElement = document.getElementById('W_D_day');
                        daysLeftElement.textContent = `${days}일`;
                    }
        
                    function showEndDate(endDate) {
                        const endDateElement = document.getElementById('W_End_date');
                        endDateElement.textContent = `${endDate} 종료`;
                    }
        
                    function showParticipationGuide(guide) {
                        const guideElement = document.getElementById('activity_participation_guide');
                        guideElement.textContent = guide;
                    }
                </script>
            </body>
        </html>