<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="user-scaleable=no, initial-scale=1.0,maximum-scale=1.0">
    <title>악기</title>
    <link rel="stylesheet" href="../../css/gift_main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap');
    </style>
</head>
<body>
    <header id="navbar"></header>
    <div id="line"></div>
    <h2 id="악기" class="product-title">악기 ></h2>
    <div class="new" id="instruments"></div>

    <!--footer-->
    <footer id="container"></footer>

    <script src="../../script.js"></script>
    <script src="../../main/script/test.js"></script>

    <script>
        fetch("../1.navbar/header.html")
        .then(response => response.text())
        .then(data => {
            const navbar = document.getElementById('navbar');
            navbar.innerHTML = data;
        });

        fetch("../6.footer/footer.html")
        .then(response => response.text())
        .then(data => {
            const container = document.getElementById('container');
            container.innerHTML = data;
        });
    </script>

    <script src="../../script/script.js"></script>
    <script src="../../script/data.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const instrumentsContainer = document.getElementById('instruments'); // 악기 카테고리 요소

            // 'Music' 카테고리의 모든 상품 출력
            Gift.forEach(gift => {
                if (gift.G_category === 'Music') {
                    const item = document.createElement('a');
                    item.href = './kind-gift-detail.html'; // 세부 페이지로 이동
                    item.onclick = () => {
                        localStorage.setItem('selectedGiftId', gift.id);
                    };

                    const progressTextColor = gift.G_funding_progress === 100 ? 'green' : 
                        gift.G_funding_progress >= 70 ? 'rgb(255, 94, 0)' : '';

                    const isSuccess = gift.G_funding_progress === 100 ? `
                        <span class="success-complete">펀딩성공!!</span>
                        <span class="complete-icon"><i class="fa-solid fa-gift"></i></span>
                    ` : gift.G_funding_progress >= 70 ? `
                        <span class="success-message">성공임박</span>
                        <span class="success-icon"><i class="fas fa-clock"></i></span>
                    ` : '';

                    item.innerHTML = `
                        <ul class="item1">
                            <li>
                                <img src="${gift.G_Product_Sample}" alt="${gift.G_Product_Name}">
                            </li>
                            <li class="subject">
                                ${gift.G_Maker}
                                <h3>${gift.G_Product_Name}</h3>
                            </li>
                            <li class="price">
                                <span class="funding">펀딩금액</span>
                                <span class="achieved">달성률</span><br>
                                <strong class="sung">${gift.G_funding_achievement.toLocaleString()}원</strong>
                                <strong class="percent" style="color: ${progressTextColor}">${gift.G_funding_progress}%</strong>
                                <br>
                                ${isSuccess} 
                            </li>
                        </ul>
                    `;

                    instrumentsContainer.appendChild(item);
                }
            });
        });
    </script>
</body>
</html>
